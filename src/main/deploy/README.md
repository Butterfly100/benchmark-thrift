##What is it  
Benchmark-Thrift as a open-source application designed to load test thrift applications and measure performance. It may be used to test performance on thrift applications. It also can be used to simulate a heavy load on a server, group of servers, network or object to test its strength or to analyze overall performance under different load types.  
It's the first out-of-box thrift protocol pressure tool so far and it's simple usage, you could also be integrated within Pressir platform.

##Features  
   * Simple Usage: Using a simple command line, you can press without any code development capabilities   
   * Compatible with various versions of thrift
   * Two types of pressure - not only to meet concurrent requirements, but also to test in the form of fixed throughput

#Requirements  
The following requirements exist for running Benchmark-thrift:
   * ##Java Interpreter:
     A fully compliant Java 8 Runtime Environment is required for Benchmark-thrift to execute.
   * ##Jar package generated by IDL:
     Current tool requires the user to give the jar package which generated by IDL.
     
##Installation Instructions
Note that spaces in directory names can cause problems.

   * Release builds

    Clone or download source repository to your local machine 

##Running Benchmark-Thrift  
   Make sure you have JAVA_HOME env is properly configured, and then: 
```bash
    echo $JAVA_HOME             # should print your Java home dir. If the command fails, you need to install the Java environment. Java Downloads: https://www.oracle.com/technetwork/java/javase/downloads/index.html
    cd benchmark-thrift
    chmod 755 *.sh              # make it executable
    sh pstr.sh -c 10 -D 100s -p ./demo.yml -d ./demo.txt 127.0.0.1:8090/Test/test # run it. If the duration and pressure type are not specified, the default one-minute concurrent execution is achieved
```

####Simplest Usage  
```bash
    ./pstr.sh -p <thriftConf.properties> -d <data.conf> [ -c concurrency ] [ -n requests ] [options] url
```
####OPTIONS
   The options are:     
   * -p xx.properties   
   The configuration files related to Thrift include Transport, Protocol, Thrift version, and the location of the generated jar package. File format is limited to .properties file
        * ######Example  
         version=0.12.0  
         classpath=/Users/didi/test.jar        
         transport=TFramedTransport(transport=TSocket)  
         protocol=TCompactProtocol  #required, options: TBinaryProtocol, TCompactProtocol          
   * -d data.conf   
   The parameters used in the method. In a file, each line represents a parameter of the method
        * ######Example   
         #If the method test has 4 parameters, the types are i64, list, struct and string. The data file content should like that:  
         123  
         ["2","3"]  
         {"name":"value","uType":"uValue"}  
         string   
   * -c concurrency    
   The number of multiple requests to make at a time
   * -q throughput  
   The number of requests issued in 1 Second
   * -D duration  
   How many seconds will the pressure last. It with a default value 60. You can specify the duration in the following ways:  
   -D 10 | -D 10s | -D 10second  
   * -v     
   Print version number
   * -h  
   Display usage information
   

##Contributing
Welcome to contribute by creating issues or sending pull requests. See Contributing Guide for guidelines.

##License
thrift-mock is licensed under the Apache License 2.0. See the LICENSE file.

##Note
This is not an official Didi product (experimental or otherwise), it is just code that happens to be owned by Didi.

Thank you for using Benchmark-Thrift

